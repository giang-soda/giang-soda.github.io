import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as f,L as G,b as B}from"./chunk-QMGIS6GS-DZztEkVs.js";import{d as H}from"./debounce-D9ctexka.js";import{I}from"./input-D-_1mv6L.js";import{S as P,a as T,b as D,c as A,d as b}from"./select-7mBtS6Ys.js";import{C as K,N as U,P as $,a as Z,b as q,c as o,d as J,e as Q,f as W,D as X,g as j,h as L,i as Y}from"./base-store-C-qtuD4s.js";import{B as ee,A as ae}from"./button-DZ4teuIw.js";import{L as w}from"./label-2IwhEJvq.js";import{C as ne,c as ie,d as te,a as se}from"./card-DrjNFZUM.js";import"./index-CGgTmrc1.js";import{s as E}from"./slugify-CAUJ80J2.js";import{u as V}from"./useTranslation-BTxYNbzO.js";import{S as re}from"./search-BwrN1phU.js";import{U as le}from"./url-path-DazeSMIU.js";import"./auth-_r7jvU0l.js";import"./local-storage-DWUcO9io.js";import"./utils-BA6gyYTm.js";import"./eye-P0uHH9uI.js";import"./loader-circle-CzWM3YVe.js";import"./index-Eq7z2fNl.js";import"./Combination-BuQb3gNO.js";import"./i18nInstance-CZ4THbp4.js";import"./chevron-right-Cji9ihin.js";import"./index-B39MSPx1.js";const M="all";function ce({data:x,columns:c,searchPlaceholder:y,pageSizeOptions:k=$,dataSearch:p,debounceDelay:v=500,store:n,renderGridItem:C}){const{t:h}=V(["common"]),[z,R]=f.useState(0),N=H((a,s)=>{n.setSearchTerm(a,s)},v),u=(a,s)=>{N(a,s)},_=()=>{n.reset(),R(a=>a+1)};f.useEffect(()=>()=>{N.cancel()},[N]);const g=f.useMemo(()=>{let a=[...x];return p&&(a=a.filter(s=>Object.entries(n.searchTerm).every(([l,r])=>{if(r==="")return!0;const t=p.find(m=>m.key===l);return t?t.searchFn?t.searchFn(s,r):E(s[l],{lower:!0,strict:!0,replacement:" "}).includes(E(r,{lower:!0,strict:!0,replacement:" "})):!0}))),n.sortConfig.key&&a.sort((s,l)=>{const r=s[n.sortConfig.key],t=l[n.sortConfig.key];return r==null?n.sortConfig.direction==="asc"?-1:1:t==null?n.sortConfig.direction==="asc"?1:-1:n.sortConfig.type==="number"?n.sortConfig.direction==="asc"?Number(r)-Number(t):Number(t)-Number(r):r<t?n.sortConfig.direction==="asc"?-1:1:r>t?n.sortConfig.direction==="asc"?1:-1:0}),a},[x,n.searchTerm,n.sortConfig,c,p]),d=Math.ceil(g.length/n.pagination.pageSize),S=f.useMemo(()=>{const a=n.pagination.pageIndex*n.pagination.pageSize;return g.slice(a,a+n.pagination.pageSize)},[g,n.pagination.pageIndex,n.pagination.pageSize]),O=()=>{const a=[];if(d<=5)for(let l=0;l<d;l++)a.push(e.jsx(o,{children:e.jsx(j,{href:"#",isActive:n.pagination.pageIndex===l,onClick:r=>{r.preventDefault(),n.setPageIndex(l)},children:l+1})},l));else{a.push(e.jsx(o,{children:e.jsx(j,{href:"#",isActive:n.pagination.pageIndex===0,onClick:t=>{t.preventDefault(),n.setPageIndex(0)},children:"1"})},0)),n.pagination.pageIndex>2&&a.push(e.jsx(o,{children:e.jsx(L,{})},"ellipsis1"));const l=Math.max(1,n.pagination.pageIndex-1),r=Math.min(d-2,n.pagination.pageIndex+1);for(let t=l;t<=r;t++)a.push(e.jsx(o,{children:e.jsx(j,{href:"#",isActive:n.pagination.pageIndex===t,onClick:m=>{m.preventDefault(),n.setPageIndex(t)},children:t+1})},t));n.pagination.pageIndex<d-3&&a.push(e.jsx(o,{children:e.jsx(L,{})},"ellipsis2")),d>1&&a.push(e.jsx(o,{children:e.jsx(j,{href:"#",isActive:n.pagination.pageIndex===d-1,onClick:t=>{t.preventDefault(),n.setPageIndex(d-1)},children:d})},d-1))}return a},F=a=>{var s,l,r,t,m;return e.jsxs(ne,{className:"h-full",children:[e.jsx(ie,{className:"pb-3",children:e.jsx(te,{className:"text-lg",children:(s=c.find(i=>i.key==="name"||i.key==="title"))!=null&&s.render?(l=c.find(i=>i.key==="name"||i.key==="title"))==null?void 0:l.render(a[c.find(i=>i.key==="name"||i.key==="title").key],a):a[((r=c.find(i=>i.key==="name"||i.key==="title"))==null?void 0:r.key)||"id"]===null||a[((t=c.find(i=>i.key==="name"||i.key==="title"))==null?void 0:t.key)||"id"]===void 0?"-":String(a[((m=c.find(i=>i.key==="name"||i.key==="title"))==null?void 0:m.key)||"id"])})}),e.jsx(se,{className:"space-y-2",children:c.filter(i=>i.key!=="name"&&i.key!=="title").map(i=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i.header,":"]}),e.jsx("span",{className:"text-sm",children:i.render?i.render(a[i.key],a):a[i.key]===null||a[i.key]===void 0?"-":i.date&&a[i.key]?W(String(a[i.key]),X):String(a[i.key])})]},String(i.key)))})]},String(a.id))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"relative flex-1",children:p?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs(w,{className:"text-muted-foreground text-sm",children:[h("pagination.search",{ns:"common"}),":"]}),p.map(a=>e.jsxs("div",{children:[a.type==="input"&&e.jsx(I,{placeholder:a.label,onChange:s=>u(a.key,s.target.value),defaultValue:n.searchTerm[a.key]}),a.type==="select"&&a.options&&e.jsxs(P,{onValueChange:s=>u(a.key,s==="all"?"":s),defaultValue:n.searchTerm[a.key],children:[e.jsx(T,{className:"max-w-sm",id:a.key,children:e.jsx(D,{placeholder:a.label})}),e.jsxs(A,{children:[e.jsx(b,{value:"all",children:a.label}),a.options.map(s=>e.jsx(b,{value:s.value,children:s.label},s.value))]})]}),a.type==="checkbox"&&e.jsxs("div",{className:"flex h-9 items-center space-x-2 rounded-md border px-3 py-2",children:[e.jsx(K,{id:a.key,checked:n.searchTerm[a.key],onCheckedChange:s=>u(a.key,s)}),e.jsx(w,{htmlFor:a.key,className:"cursor-pointer text-sm font-normal whitespace-nowrap",children:a.label})]})]},`${a.key}-${z}`))]})}):e.jsxs("div",{children:[e.jsx(re,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(I,{placeholder:y||h("pagination.search",{ns:"common"}),className:"pl-9",value:n.searchTerm[M],onChange:a=>u(M,a.target.value)})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ee,{variant:"outline",size:"icon",icon:ae.RELOAD,onClick:_,title:h("actions.reload",{ns:"common"})})})]}),e.jsx("div",{className:"min-h-[400px]",children:S.length===0?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(U,{})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(a=>C?C(a):F(a))})}),e.jsxs("div",{className:"flex items-center justify-end px-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:h("pagination.showing",{from:g.length>0?n.pagination.pageIndex*n.pagination.pageSize+1:0,to:Math.min((n.pagination.pageIndex+1)*n.pagination.pageSize,g.length),total:g.length,ns:"common"})}),e.jsxs(P,{value:n.pagination.pageSize.toString(),onValueChange:a=>{n.setPageSize(Number(a))},children:[e.jsx(T,{className:"h-8 w-[70px]",children:e.jsx(D,{placeholder:n.pagination.pageSize})}),e.jsx(A,{children:k.map(a=>e.jsx(b,{value:a.toString(),children:a},a))})]})]}),d>1&&e.jsx("div",{className:"ml-4 flex items-center space-x-2",children:e.jsx(Z,{children:e.jsxs(q,{children:[e.jsx(o,{children:e.jsx(J,{href:"#",onClick:a=>{a.preventDefault(),n.setPageIndex(Math.max(0,n.pagination.pageIndex-1))},className:n.pagination.pageIndex===0?"pointer-events-none opacity-50":""})}),O(),e.jsx(o,{children:e.jsx(Q,{href:"#",onClick:a=>{a.preventDefault(),n.setPageIndex(Math.min(d-1,n.pagination.pageIndex+1))},className:n.pagination.pageIndex>=d-1?"pointer-events-none opacity-50":""})})]})})})]})]})}const de=Y({pagination:{pageSize:12}});function oe({data:x}){const c=de(),y=x.map(n=>({...n,id:n.slug})),k=[{key:"slug",header:"Slug",sortable:!0,searchable:!0},{key:"title",header:"Title",sortable:!0,searchable:!0},{key:"thumbnail",header:"Thumbnail",sortable:!0,searchable:!0},{key:"content",header:"Content",sortable:!0,searchable:!0}],p=[{key:"title",label:"Title",type:"input"}],v=n=>e.jsxs("div",{className:"h-full",children:[e.jsx("h1",{className:"text-lg font-bold",children:e.jsx(G,{to:le.ADMIN.POSTS.DETAIL(n.slug),children:n.title})}),e.jsxs("div",{className:"space-y-2",children:[n.thumbnail&&e.jsx("img",{src:n.thumbnail,alt:n.title,className:"w-full h-40 object-cover"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.content})]})]},String(n.id));return e.jsx("div",{className:"space-y-6",children:e.jsx(ce,{data:y,columns:k,dataSearch:p,store:c,renderGridItem:v})})}function ze(){const{t:x}=V("users"),c=B();return e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:x("post.list.title")})}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx(oe,{data:c==null?void 0:c.list})})]})}export{ze as default};
