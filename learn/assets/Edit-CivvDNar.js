import{r as h,w as I,u as g,L as U}from"./chunk-QMGIS6GS-CrpuPEwO.js";import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{u as A,a as L,F as T,b as d,c as l,d as c,e as u,f as p}from"./types-n0sIDpxD.js";import{I as f}from"./input-N3TGilqx.js";import{P as D}from"./label-9dDV_8Wa.js";import{t as R}from"./index-C017cjXN.js";import{K as o}from"./key-cache-CcAsM2Ek.js";import{U as m}from"./url-path-DxgPT0H2.js";import{u as b,E as y}from"./user-schema-BjKWI01Y.js";import{L as F,D as N}from"./DeleteModal-B1_balTZ.js";import{u as P,A as x,a as _}from"./use-api-SF2RHhQ1.js";import{u as j}from"./useTranslation-CcrXRHfF.js";import{B as v,A as k}from"./button-D-yyh9V7.js";import{m as w}from"./utils-Bb5dE6UV.js";import"./eye-ujyX34AA.js";import"./index-C7-sbl74.js";import"./dialog-BAYzT_VC.js";import"./index-BrKM5WuU.js";import"./Combination-Bya5Faf2.js";import"./QueryClientProvider-Bqc-B1sJ.js";function M({queryResponse:e,children:t}){return s.jsx(s.Fragment,{children:e.query.isLoading?s.jsx(F,{}):e.query.isError?s.jsx("div",{className:"flex flex-col items-center gap-2 text-xl font-bold text-red-500",children:s.jsx("p",{children:e.query.error.message})}):e.query.data&&t(e.query.data)})}function C({user:e}){const{t}=j(["common","users","validate"]),[i,n]=h.useState(!1),a=A({resolver:L(b(t,!1)),defaultValues:{name:e.name,email:e.email,password:""}}),S=P({method:"put",url:x.USERS.UPDATE(e.id)},{message:{default:t("errors.update_default",{ns:"users"})},bodyParamsStruct:{email:String,name:String,password:String},refreshQuerykey:[o.USER_LIST,[o.USER_DETAIL,e.id]],redirect:m.ADMIN.USERS.LIST,onSuccess:r=>{R.success(t("success.update",{ns:"users",id:r.name}))}}),E=r=>{S.mutation.mutate(r)};return s.jsxs("div",{children:[s.jsx(T,{...a,children:s.jsxs("form",{onSubmit:r=>{r.preventDefault(),a.handleSubmit(E)(r)},className:"grid gap-5",children:[s.jsx(d,{control:a.control,name:"email",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.email",{ns:"users"})}),s.jsx(u,{children:s.jsx(f,{type:"email",placeholder:"admin@gmail.com",...r})}),s.jsx(p,{})]})}),s.jsx(d,{control:a.control,name:"name",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.name",{ns:"users"})}),s.jsx(u,{children:s.jsx(f,{placeholder:"Soda name",...r})}),s.jsx(p,{})]})}),s.jsx(d,{control:a.control,name:"password",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.password",{ns:"users"})}),s.jsx(u,{children:s.jsx(D,{...r})}),s.jsx(p,{})]})}),s.jsx(y,{loading:S.mutation.isPending,backTo:m.ADMIN.USERS.LIST,setOpenDelete:n})]})}),s.jsx(N,{apiUrl:x.USERS.DELETE(e.id),open:i,setOpen:n,refreshQuerykey:[o.USER_LIST,[o.USER_DETAIL,e.id]],redirect:m.ADMIN.USERS.LIST})]})}const os=()=>w("User Edit"),is=I(function(){const{t}=j("users"),{id:i}=g(),n=_({method:"get",url:x.USERS.DETAIL(i??"")},{querykey:[o.USER_DETAIL,i],message:{default:t("errors.detail_default",{ns:"users"})}});return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(U,{to:m.ADMIN.USERS.LIST,children:s.jsx(v,{variant:"link",icon:k.BACK})}),s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t("edit.title")})]}),s.jsx(M,{queryResponse:n,children:a=>s.jsx(C,{user:a})})]})});export{is as default,os as meta};
