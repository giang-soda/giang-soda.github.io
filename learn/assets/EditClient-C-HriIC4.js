import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{u as h,a as I,F as g,b as l,c as d,d as c,e as u,f as p}from"./types-DzYRHU-x.js";import{I as j}from"./input-BEDOsXoq.js";import{r as U,d as L,L as A}from"./chunk-QMGIS6GS-CCE_czqQ.js";import{u as T,A as x,P as D,a as R}from"./label-BjxiWtDZ.js";import{t as b}from"./index-DrJxZVS9.js";import{a as i}from"./local-storage-DWUcO9io.js";import{U as n}from"./url-path-CAs4ifyK.js";import{u as y,E as F}from"./user-schema-BCm2waVw.js";import{D as N}from"./DeleteModal-Cko7uITw.js";import{u as f}from"./useTranslation-DFJ23rjy.js";import{B as _,A as v}from"./button-CCjVSFfs.js";import{L as P}from"./ClientComponent-Dj8RX5cu.js";import"./utils-BA6gyYTm.js";import"./auth-_r7jvU0l.js";import"./eye-Cr-lJRxV.js";import"./loader-circle-LKSEXaXr.js";import"./index-Dmb6X5_Z.js";import"./index-BwX5QOVe.js";import"./dialog-HM2XEvXz.js";import"./index-D4so8YEw.js";import"./Combination-BJ2MXdCy.js";import"./i18nInstance-DBIXdvxg.js";import"./preload-helper-B6OyRjpI.js";function k({queryResponse:e,children:t}){return s.jsx(s.Fragment,{children:e.query.isLoading?s.jsx(P,{}):e.query.isError?s.jsx("div",{className:"flex flex-col items-center gap-2 text-xl font-bold text-red-500",children:s.jsx("p",{children:e.query.error.message})}):e.query.data&&t(e.query.data)})}function M({user:e}){const{t}=f(["common","users","validate"]),[m,o]=U.useState(!1),a=h({resolver:I(y(t,!1)),defaultValues:{name:e.name,email:e.email,password:""}}),S=T({method:"put",url:x.USERS.UPDATE(e.id)},{message:{default:t("errors.update_default",{ns:"users"})},bodyParamsStruct:{email:String,name:String,password:String},refreshQuerykey:[i.USER_LIST,[i.USER_DETAIL,e.id]],redirect:n.ADMIN.USERS.LIST,onSuccess:r=>{b.success(t("success.update",{ns:"users",id:r.name}))}}),E=r=>{S.mutation.mutate(r)};return s.jsxs("div",{children:[s.jsx(g,{...a,children:s.jsxs("form",{onSubmit:r=>{r.preventDefault(),a.handleSubmit(E)(r)},className:"grid gap-5",children:[s.jsx(l,{control:a.control,name:"email",render:({field:r})=>s.jsxs(d,{children:[s.jsx(c,{children:t("list.email",{ns:"users"})}),s.jsx(u,{children:s.jsx(j,{type:"email",placeholder:"admin@gmail.com",...r})}),s.jsx(p,{})]})}),s.jsx(l,{control:a.control,name:"name",render:({field:r})=>s.jsxs(d,{children:[s.jsx(c,{children:t("list.name",{ns:"users"})}),s.jsx(u,{children:s.jsx(j,{placeholder:"Soda name",...r})}),s.jsx(p,{})]})}),s.jsx(l,{control:a.control,name:"password",render:({field:r})=>s.jsxs(d,{children:[s.jsx(c,{children:t("list.password",{ns:"users"})}),s.jsx(u,{children:s.jsx(D,{...r})}),s.jsx(p,{})]})}),s.jsx(F,{loading:S.mutation.isPending,backTo:n.ADMIN.USERS.LIST,setOpenDelete:o})]})}),s.jsx(N,{apiUrl:x.USERS.DELETE(e.id),open:m,setOpen:o,refreshQuerykey:[i.USER_LIST,[i.USER_DETAIL,e.id]],redirect:n.ADMIN.USERS.LIST})]})}function ns(){const{t:e}=f("users"),{id:t}=L(),m=R({method:"get",url:x.USERS.DETAIL(t??"")},{querykey:[i.USER_DETAIL,t],message:{default:e("errors.detail_default",{ns:"users"})}});return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(A,{to:n.ADMIN.USERS.LIST,children:s.jsx(_,{variant:"link",icon:v.BACK})}),s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:e("edit.title")})]}),s.jsx(k,{queryResponse:m,children:o=>s.jsx(M,{user:o})})]})}export{ns as default};
