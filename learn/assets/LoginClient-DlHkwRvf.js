import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{o as x,s as i,u as h,a as f,F as j,b as m,c as n,d as l,e as d,f as c}from"./form-Dmv1pmwz.js";import{L as N}from"./chunk-QMGIS6GS-DZztEkVs.js";import{B as v}from"./button-DZ4teuIw.js";import{I as w}from"./input-D-_1mv6L.js";import{P as F}from"./debounce-D9ctexka.js";import{t as I}from"./index-CGgTmrc1.js";import{U as b}from"./url-path-DazeSMIU.js";import{u as A,A as p}from"./use-api-CkHLgVxI.js";import{s as T}from"./auth-_r7jvU0l.js";import{u}from"./useTranslation-BTxYNbzO.js";import{C,c as L,d as P,e as S,a as D}from"./card-DrjNFZUM.js";import"./utils-BA6gyYTm.js";import"./label-2IwhEJvq.js";import"./i18nInstance-CZ4THbp4.js";import"./index-Eq7z2fNl.js";import"./loader-circle-CzWM3YVe.js";import"./eye-P0uHH9uI.js";import"./QueryClientProvider-CHEzqbNR.js";import"./local-storage-DWUcO9io.js";const M=r=>x({email:i().min(1,{message:r("required",{ns:"validate"})}).max(255,{message:r("max",{max:255,ns:"validate"})}).email({message:r("email",{ns:"validate"})}),password:i().min(6,{message:r("min",{min:6,ns:"validate"})}).max(50,{message:r("max",{max:50,ns:"validate"})})});function y(){const{t:r}=u(["auth","validate"]),o=h({resolver:f(M(r)),defaultValues:{email:"",password:""}}),t=A({method:"get",url:p.ADMIN.AUTH.LOGIN},{message:{default:r("errors.login_default",{ns:"auth"})},bodyParamsStruct:{email:String,password:String},redirect:b.ADMIN.HOME,onSuccess:(a,e)=>{if(a.length===0)throw new Error(r("errors.login_default",{ns:"auth"}));T(new Date().getTime()+""+((e==null?void 0:e.email)||"")),I.success(r("login.success",{ns:"auth"}))}}),g=a=>{t.mutation.mutate({...a,rewriteAxiosOption:{url:p.ADMIN.AUTH.LOGIN+"?email="+a.email}})};return s.jsx(j,{...o,children:s.jsxs("form",{onSubmit:a=>{a.preventDefault(),o.handleSubmit(g)(a)},className:"grid gap-5",children:[s.jsx(m,{control:o.control,name:"email",render:({field:a})=>s.jsxs(n,{children:[s.jsx(l,{children:r("login.email")}),s.jsx(d,{children:s.jsx(w,{type:"email",placeholder:"admin@gmail.com",...a})}),s.jsx(c,{})]})}),s.jsx(m,{control:o.control,name:"password",render:({field:a})=>s.jsxs(n,{className:"relative",children:[s.jsx(l,{children:r("login.password")}),s.jsx(d,{children:s.jsx(F,{...a})}),s.jsx(c,{}),s.jsx(N,{to:"/forgot-password",className:"text-muted-foreground absolute -top-0.5 right-0 text-sm font-medium hover:opacity-75",children:r("login.forgotPassword")})]})}),s.jsx(v,{className:"mt-2",loading:t.mutation.isPending,children:r("login.button")})]})})}function ss(){const{t:r}=u(["auth"]);return s.jsx(s.Fragment,{children:s.jsxs(C,{className:"gap-4",children:[s.jsxs(L,{children:[s.jsx(P,{className:"text-lg tracking-tight",children:r("login.title")}),s.jsx(S,{children:r("login.subtitle")})]}),s.jsx(D,{children:s.jsx(y,{})})]})})}export{ss as default};
