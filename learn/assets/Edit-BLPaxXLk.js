import{r as h,w as g,b as U,L}from"./chunk-QMGIS6GS-CdgJu9QH.js";import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{u as I,a as T,F as A,b as d,c as l,d as c,e as u,f as x}from"./types-CfP5In1F.js";import{I as j,P as b}from"./label-BDrDpCpj.js";import{K as o}from"./key-cache-CudxctG2.js";import{U as m}from"./url-path-hoQjF70C.js";import{t as D}from"./index-JzgrUQlr.js";import{u as R,E as y}from"./user-schema-DeF-zhx0.js";import{L as F,D as P}from"./DeleteModal-BZPOS9uK.js";import{u as _,A as p,a as v}from"./use-api-CJsIN-_e.js";import{u as f,B as k,A as w}from"./useTranslation-Cn8434_D.js";import{m as N}from"./utils-B8JRlTp4.js";import"./index-ybyRt-i0.js";import"./dialog-DNScoMkT.js";import"./index-U6aCdcoH.js";import"./Combination-BFcBbIJA.js";import"./QueryClientProvider-CS_NyGzZ.js";function C({queryResponse:e,children:t}){return s.jsx(s.Fragment,{children:e.query.isLoading?s.jsx(F,{}):e.query.isError?s.jsx("div",{className:"flex flex-col items-center gap-2 text-xl font-bold text-red-500",children:s.jsx("p",{children:e.query.error.message})}):e.query.data&&t(e.query.data)})}function O({user:e}){const{t}=f(["common","users","validate"]),[i,n]=h.useState(!1),a=I({resolver:T(R(t,!1)),defaultValues:{name:e.name,email:e.email,password:""}}),S=_({method:"put",url:p.USERS.UPDATE(e.id)},{message:{default:t("errors.update_default",{ns:"users"})},bodyParamsStruct:{email:String,name:String,password:String},refreshQuerykey:[o.USER_LIST,[o.USER_DETAIL,e.id]],redirect:m.USERS.LIST,onSuccess:r=>{D.success(t("success.update",{ns:"users",id:r.name}))}}),E=r=>{S.mutation.mutate(r)};return s.jsxs("div",{children:[s.jsx(A,{...a,children:s.jsxs("form",{onSubmit:r=>{r.preventDefault(),a.handleSubmit(E)(r)},className:"grid gap-5",children:[s.jsx(d,{control:a.control,name:"email",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.email",{ns:"users"})}),s.jsx(u,{children:s.jsx(j,{type:"email",placeholder:"admin@gmail.com",...r})}),s.jsx(x,{})]})}),s.jsx(d,{control:a.control,name:"name",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.name",{ns:"users"})}),s.jsx(u,{children:s.jsx(j,{placeholder:"Soda name",...r})}),s.jsx(x,{})]})}),s.jsx(d,{control:a.control,name:"password",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.password",{ns:"users"})}),s.jsx(u,{children:s.jsx(b,{...r})}),s.jsx(x,{})]})}),s.jsx(y,{loading:S.mutation.isPending,backTo:m.USERS.LIST,setOpenDelete:n})]})}),s.jsx(P,{apiUrl:p.USERS.DELETE(e.id),open:i,setOpen:n,refreshQuerykey:[o.USER_LIST,[o.USER_DETAIL,e.id]],redirect:m.USERS.LIST})]})}const rs=()=>N("User Edit"),ts=g(function(){const{t}=f("users"),{id:i}=U(),n=v({method:"get",url:p.USERS.DETAIL(i??"")},{querykey:[o.USER_DETAIL,i],message:{default:t("errors.detail_default",{ns:"users"})}});return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(L,{to:m.USERS.LIST,children:s.jsx(k,{variant:"link",icon:w.BACK})}),s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t("edit.title")})]}),s.jsx(C,{queryResponse:n,children:a=>s.jsx(O,{user:a})})]})});export{ts as default,rs as meta};
