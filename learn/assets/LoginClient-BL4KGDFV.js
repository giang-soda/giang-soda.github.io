import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{o as x,s as i,u as h,a as f,F as j,b as n,c as m,d as l,e as d,f as c}from"./types-DzYRHU-x.js";import{L as N}from"./chunk-QMGIS6GS-CCE_czqQ.js";import{B as v}from"./button-CCjVSFfs.js";import{I as w}from"./input-BEDOsXoq.js";import{u as F,P as I,A as u}from"./label-BjxiWtDZ.js";import{t as b}from"./index-DrJxZVS9.js";import{U as A}from"./url-path-CAs4ifyK.js";import{s as T}from"./auth-_r7jvU0l.js";import{u as p}from"./useTranslation-DFJ23rjy.js";import{C,c as L,d as P,e as S,a as D}from"./card-ZAIwJ2_4.js";import"./utils-BA6gyYTm.js";import"./loader-circle-LKSEXaXr.js";import"./eye-Cr-lJRxV.js";import"./index-Dmb6X5_Z.js";import"./index-BwX5QOVe.js";import"./local-storage-DWUcO9io.js";import"./i18nInstance-DBIXdvxg.js";const M=a=>x({email:i().min(1,{message:a("required",{ns:"validate"})}).max(255,{message:a("max",{max:255,ns:"validate"})}).email({message:a("email",{ns:"validate"})}),password:i().min(6,{message:a("min",{min:6,ns:"validate"})}).max(50,{message:a("max",{max:50,ns:"validate"})})});function y(){const{t:a}=p(["auth","validate"]),e=h({resolver:f(M(a)),defaultValues:{email:"",password:""}}),t=F({method:"get",url:u.ADMIN.AUTH.LOGIN},{message:{default:a("errors.login_default",{ns:"auth"})},bodyParamsStruct:{email:String,password:String},redirect:A.ADMIN.HOME,onSuccess:(r,o)=>{if(r.length===0)throw new Error(a("errors.login_default",{ns:"auth"}));T(new Date().getTime()+""+((o==null?void 0:o.email)||"")),b.success(a("login.success",{ns:"auth"}))}}),g=r=>{t.mutation.mutate({...r,rewriteAxiosOption:{url:u.ADMIN.AUTH.LOGIN+"?email="+r.email}})};return s.jsx(j,{...e,children:s.jsxs("form",{onSubmit:r=>{r.preventDefault(),e.handleSubmit(g)(r)},className:"grid gap-5",children:[s.jsx(n,{control:e.control,name:"email",render:({field:r})=>s.jsxs(m,{children:[s.jsx(l,{children:a("login.email")}),s.jsx(d,{children:s.jsx(w,{type:"email",placeholder:"admin@gmail.com",...r})}),s.jsx(c,{})]})}),s.jsx(n,{control:e.control,name:"password",render:({field:r})=>s.jsxs(m,{className:"relative",children:[s.jsx(l,{children:a("login.password")}),s.jsx(d,{children:s.jsx(I,{...r})}),s.jsx(c,{}),s.jsx(N,{to:"/forgot-password",className:"text-muted-foreground absolute -top-0.5 right-0 text-sm font-medium hover:opacity-75",children:a("login.forgotPassword")})]})}),s.jsx(v,{className:"mt-2",loading:t.mutation.isPending,children:a("login.button")})]})})}function V(){const{t:a}=p(["auth"]);return s.jsx(s.Fragment,{children:s.jsxs(C,{className:"gap-4",children:[s.jsxs(L,{children:[s.jsx(P,{className:"text-lg tracking-tight",children:a("login.title")}),s.jsx(S,{children:a("login.subtitle")})]}),s.jsx(D,{children:s.jsx(y,{})})]})})}export{V as default};
