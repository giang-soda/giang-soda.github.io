import{r as h,w as I,b as g,L as U}from"./chunk-QMGIS6GS-6uWjcyoF.js";import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{u as A,a as L,F as T,b as d,c as l,d as c,e as u,f as p}from"./types-DPuLmUkd.js";import{I as j}from"./input-CR9UrM4y.js";import{u as D,A as x,P as b,a as R}from"./label-DQDfv7wb.js";import{t as y}from"./index-DHwkbqTO.js";import{a as o}from"./key-cache-C3Pdtmyz.js";import{U as m}from"./url-path-Bv42RIL-.js";import{u as F,E as N}from"./user-schema-DIaCxOTf.js";import{L as P,D as _}from"./DeleteModal-CsrJQ1OE.js";import{u as f}from"./useTranslation-LzogQ1jP.js";import{B as v,A as k}from"./button-CDt8EqQF.js";import{m as w}from"./utils-BZSh1A4I.js";import"./auth-DGr47v7D.js";import"./eye-CeJUASEq.js";import"./index-Cy3Emdqg.js";import"./dialog-B8Uj_SJm.js";import"./index-BpgbVD9j.js";import"./Combination-CiOAV77i.js";function M({queryResponse:e,children:t}){return s.jsx(s.Fragment,{children:e.query.isLoading?s.jsx(P,{}):e.query.isError?s.jsx("div",{className:"flex flex-col items-center gap-2 text-xl font-bold text-red-500",children:s.jsx("p",{children:e.query.error.message})}):e.query.data&&t(e.query.data)})}function C({user:e}){const{t}=f(["common","users","validate"]),[i,n]=h.useState(!1),a=A({resolver:L(F(t,!1)),defaultValues:{name:e.name,email:e.email,password:""}}),S=D({method:"put",url:x.USERS.UPDATE(e.id)},{message:{default:t("errors.update_default",{ns:"users"})},bodyParamsStruct:{email:String,name:String,password:String},refreshQuerykey:[o.USER_LIST,[o.USER_DETAIL,e.id]],redirect:m.ADMIN.USERS.LIST,onSuccess:r=>{y.success(t("success.update",{ns:"users",id:r.name}))}}),E=r=>{S.mutation.mutate(r)};return s.jsxs("div",{children:[s.jsx(T,{...a,children:s.jsxs("form",{onSubmit:r=>{r.preventDefault(),a.handleSubmit(E)(r)},className:"grid gap-5",children:[s.jsx(d,{control:a.control,name:"email",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.email",{ns:"users"})}),s.jsx(u,{children:s.jsx(j,{type:"email",placeholder:"admin@gmail.com",...r})}),s.jsx(p,{})]})}),s.jsx(d,{control:a.control,name:"name",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.name",{ns:"users"})}),s.jsx(u,{children:s.jsx(j,{placeholder:"Soda name",...r})}),s.jsx(p,{})]})}),s.jsx(d,{control:a.control,name:"password",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:t("list.password",{ns:"users"})}),s.jsx(u,{children:s.jsx(b,{...r})}),s.jsx(p,{})]})}),s.jsx(N,{loading:S.mutation.isPending,backTo:m.ADMIN.USERS.LIST,setOpenDelete:n})]})}),s.jsx(_,{apiUrl:x.USERS.DELETE(e.id),open:i,setOpen:n,refreshQuerykey:[o.USER_LIST,[o.USER_DETAIL,e.id]],redirect:m.ADMIN.USERS.LIST})]})}const as=()=>w("User Edit"),os=I(function(){const{t}=f("users"),{id:i}=g(),n=R({method:"get",url:x.USERS.DETAIL(i??"")},{querykey:[o.USER_DETAIL,i],message:{default:t("errors.detail_default",{ns:"users"})}});return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(U,{to:m.ADMIN.USERS.LIST,children:s.jsx(v,{variant:"link",icon:k.BACK})}),s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t("edit.title")})]}),s.jsx(M,{queryResponse:n,children:a=>s.jsx(C,{user:a})})]})});export{os as default,as as meta};
