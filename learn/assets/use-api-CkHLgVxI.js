var St=e=>{throw TypeError(e)};var nt=(e,t,s)=>t.has(e)||St("Cannot "+s);var r=(e,t,s)=>(nt(e,t,"read from private field"),s?s.call(e):t.get(e)),y=(e,t,s)=>t.has(e)?St("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),c=(e,t,s,i)=>(nt(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),f=(e,t,s)=>(nt(e,t,"access private method"),s);import{r as C,u as Kt}from"./chunk-QMGIS6GS-DZztEkVs.js";import{S as Ut,k as Et,l as I,q as Y,r as V,b as tt,t as ht,u as Ot,v as Nt,f as Bt,w as qt,x as wt,n as st,i as It,y as Ht,z as Pt,A as pt}from"./QueryClientProvider-CHEzqbNR.js";import"./jsx-runtime-D_zvdyIk.js";import{h as Ft,a as Lt}from"./debounce-D9ctexka.js";import{u as _t}from"./useTranslation-BTxYNbzO.js";var v,u,W,p,P,j,A,D,$,k,K,F,L,x,N,o,z,ut,ot,ct,lt,ft,dt,yt,jt,xt,zt=(xt=class extends Ut{constructor(t,s){super();y(this,o);y(this,v);y(this,u);y(this,W);y(this,p);y(this,P);y(this,j);y(this,A);y(this,D);y(this,$);y(this,k);y(this,K);y(this,F);y(this,L);y(this,x);y(this,N,new Set);this.options=s,c(this,v,t),c(this,D,null),c(this,A,Et()),this.options.experimental_prefetchInRender||r(this,A).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,u).addObserver(this),Tt(r(this,u),this.options)?f(this,o,z).call(this):this.updateResult(),f(this,o,lt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return bt(r(this,u),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return bt(r(this,u),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,o,ft).call(this),f(this,o,dt).call(this),r(this,u).removeObserver(this)}setOptions(t){const s=this.options,i=r(this,u);if(this.options=r(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,r(this,u))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,o,yt).call(this),r(this,u).setOptions(this.options),s._defaulted&&!Y(this.options,s)&&r(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,u),observer:this});const n=this.hasListeners();n&&Qt(r(this,u),i,this.options,s)&&f(this,o,z).call(this),this.updateResult(),n&&(r(this,u)!==i||I(this.options.enabled,r(this,u))!==I(s.enabled,r(this,u))||V(this.options.staleTime,r(this,u))!==V(s.staleTime,r(this,u)))&&f(this,o,ut).call(this);const h=f(this,o,ot).call(this);n&&(r(this,u)!==i||I(this.options.enabled,r(this,u))!==I(s.enabled,r(this,u))||h!==r(this,x))&&f(this,o,ct).call(this,h)}getOptimisticResult(t){const s=r(this,v).getQueryCache().build(r(this,v),t),i=this.createResult(s,t);return Wt(this,i)&&(c(this,p,i),c(this,j,this.options),c(this,P,r(this,u).state)),i}getCurrentResult(){return r(this,p)}trackResult(t,s){return new Proxy(t,{get:(i,n)=>(this.trackProp(n),s==null||s(n),Reflect.get(i,n))})}trackProp(t){r(this,N).add(t)}getCurrentQuery(){return r(this,u)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=r(this,v).defaultQueryOptions(t),i=r(this,v).getQueryCache().build(r(this,v),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return f(this,o,z).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,p)))}createResult(t,s){var Ct;const i=r(this,u),n=this.options,h=r(this,p),a=r(this,P),m=r(this,j),g=t!==i?t.state:r(this,W),{state:E}=t;let l={...E},B=!1,b;if(s._optimisticResults){const O=this.hasListeners(),G=!O&&Tt(t,s),_=O&&Qt(t,i,s,n);(G||_)&&(l={...l,...qt(E.data,t.options)}),s._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:q,errorUpdatedAt:H,status:S}=l;b=l.data;let Z=!1;if(s.placeholderData!==void 0&&b===void 0&&S==="pending"){let O;h!=null&&h.isPlaceholderData&&s.placeholderData===(m==null?void 0:m.placeholderData)?(O=h.data,Z=!0):O=typeof s.placeholderData=="function"?s.placeholderData((Ct=r(this,K))==null?void 0:Ct.state.data,r(this,K)):s.placeholderData,O!==void 0&&(S="success",b=wt(h==null?void 0:h.data,O,s),B=!0)}if(s.select&&b!==void 0&&!Z)if(h&&b===(a==null?void 0:a.data)&&s.select===r(this,$))b=r(this,k);else try{c(this,$,s.select),b=s.select(b),b=wt(h==null?void 0:h.data,b,s),c(this,k,b),c(this,D,null)}catch(O){c(this,D,O)}r(this,D)&&(q=r(this,D),b=r(this,k),H=Date.now(),S="error");const rt=l.fetchStatus==="fetching",it=S==="pending",at=S==="error",vt=it&&rt,Rt=b!==void 0,w={status:S,fetchStatus:l.fetchStatus,isPending:it,isSuccess:S==="success",isError:at,isInitialLoading:vt,isLoading:vt,data:b,dataUpdatedAt:l.dataUpdatedAt,error:q,errorUpdatedAt:H,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>g.dataUpdateCount||l.errorUpdateCount>g.errorUpdateCount,isFetching:rt,isRefetching:rt&&!it,isLoadingError:at&&!Rt,isPaused:l.fetchStatus==="paused",isPlaceholderData:B,isRefetchError:at&&Rt,isStale:gt(t,s),refetch:this.refetch,promise:r(this,A)};if(this.options.experimental_prefetchInRender){const O=J=>{w.status==="error"?J.reject(w.error):w.data!==void 0&&J.resolve(w.data)},G=()=>{const J=c(this,A,w.promise=Et());O(J)},_=r(this,A);switch(_.status){case"pending":t.queryHash===i.queryHash&&O(_);break;case"fulfilled":(w.status==="error"||w.data!==_.value)&&G();break;case"rejected":(w.status!=="error"||w.error!==_.reason)&&G();break}}return w}updateResult(){const t=r(this,p),s=this.createResult(r(this,u),this.options);if(c(this,P,r(this,u).state),c(this,j,this.options),r(this,P).data!==void 0&&c(this,K,r(this,u)),Y(s,t))return;c(this,p,s);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,h=typeof n=="function"?n():n;if(h==="all"||!h&&!r(this,N).size)return!0;const a=new Set(h??r(this,N));return this.options.throwOnError&&a.add("error"),Object.keys(r(this,p)).some(m=>{const d=m;return r(this,p)[d]!==t[d]&&a.has(d)})};f(this,o,jt).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,o,lt).call(this)}},v=new WeakMap,u=new WeakMap,W=new WeakMap,p=new WeakMap,P=new WeakMap,j=new WeakMap,A=new WeakMap,D=new WeakMap,$=new WeakMap,k=new WeakMap,K=new WeakMap,F=new WeakMap,L=new WeakMap,x=new WeakMap,N=new WeakMap,o=new WeakSet,z=function(t){f(this,o,yt).call(this);let s=r(this,u).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(tt)),s},ut=function(){f(this,o,ft).call(this);const t=V(this.options.staleTime,r(this,u));if(ht||r(this,p).isStale||!Ot(t))return;const i=Nt(r(this,p).dataUpdatedAt,t)+1;c(this,F,setTimeout(()=>{r(this,p).isStale||this.updateResult()},i))},ot=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,u)):this.options.refetchInterval)??!1},ct=function(t){f(this,o,dt).call(this),c(this,x,t),!(ht||I(this.options.enabled,r(this,u))===!1||!Ot(r(this,x))||r(this,x)===0)&&c(this,L,setInterval(()=>{(this.options.refetchIntervalInBackground||Bt.isFocused())&&f(this,o,z).call(this)},r(this,x)))},lt=function(){f(this,o,ut).call(this),f(this,o,ct).call(this,f(this,o,ot).call(this))},ft=function(){r(this,F)&&(clearTimeout(r(this,F)),c(this,F,void 0))},dt=function(){r(this,L)&&(clearInterval(r(this,L)),c(this,L,void 0))},yt=function(){const t=r(this,v).getQueryCache().build(r(this,v),this.options);if(t===r(this,u))return;const s=r(this,u);c(this,u,t),c(this,W,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},jt=function(t){st.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(r(this,p))}),r(this,v).getQueryCache().notify({query:r(this,u),type:"observerResultsUpdated"})})},xt);function Vt(e,t){return I(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Tt(e,t){return Vt(e,t)||e.state.data!==void 0&&bt(e,t,t.refetchOnMount)}function bt(e,t,s){if(I(t.enabled,e)!==!1&&V(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&gt(e,t)}return!1}function Qt(e,t,s,i){return(e!==t||I(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&gt(e,s)}function gt(e,t){return I(t.enabled,e)!==!1&&e.isStaleByTime(V(t.staleTime,e))}function Wt(e,t){return!Y(e.getCurrentResult(),t)}var M,U,R,T,Q,X,mt,Mt,$t=(Mt=class extends Ut{constructor(t,s){super();y(this,Q);y(this,M);y(this,U);y(this,R);y(this,T);c(this,M,t),this.setOptions(s),this.bindMethods(),f(this,Q,X).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=r(this,M).defaultMutationOptions(t),Y(this.options,s)||r(this,M).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,R),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&It(s.mutationKey)!==It(this.options.mutationKey)?this.reset():((i=r(this,R))==null?void 0:i.state.status)==="pending"&&r(this,R).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,R))==null||t.removeObserver(this)}onMutationUpdate(t){f(this,Q,X).call(this),f(this,Q,mt).call(this,t)}getCurrentResult(){return r(this,U)}reset(){var t;(t=r(this,R))==null||t.removeObserver(this),c(this,R,void 0),f(this,Q,X).call(this),f(this,Q,mt).call(this)}mutate(t,s){var i;return c(this,T,s),(i=r(this,R))==null||i.removeObserver(this),c(this,R,r(this,M).getMutationCache().build(r(this,M),this.options)),r(this,R).addObserver(this),r(this,R).execute(t)}},M=new WeakMap,U=new WeakMap,R=new WeakMap,T=new WeakMap,Q=new WeakSet,X=function(){var s;const t=((s=r(this,R))==null?void 0:s.state)??Ht();c(this,U,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},mt=function(t){st.batch(()=>{var s,i,n,h,a,m,d,g;if(r(this,T)&&this.hasListeners()){const E=r(this,U).variables,l=r(this,U).context;(t==null?void 0:t.type)==="success"?((i=(s=r(this,T)).onSuccess)==null||i.call(s,t.data,E,l),(h=(n=r(this,T)).onSettled)==null||h.call(n,t.data,null,E,l)):(t==null?void 0:t.type)==="error"&&((m=(a=r(this,T)).onError)==null||m.call(a,t.error,E,l),(g=(d=r(this,T)).onSettled)==null||g.call(d,void 0,t.error,E,l))}this.listeners.forEach(E=>{E(r(this,U))})})},Mt),kt=C.createContext(!1),Zt=()=>C.useContext(kt);kt.Provider;function Gt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Jt=C.createContext(Gt()),Xt=()=>C.useContext(Jt),Yt=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},te=e=>{C.useEffect(()=>{e.clearReset()},[e])},ee=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(n&&e.data===void 0||Pt(s,[e.error,i])),se=e=>{if(e.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...i)=>t(s(...i)):t(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},re=(e,t)=>e.isLoading&&e.isFetching&&!t,ie=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,At=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ae(e,t,s){var l,B,b,q,H;const i=Zt(),n=Xt(),h=pt(),a=h.defaultQueryOptions(e);(B=(l=h.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||B.call(l,a),a._optimisticResults=i?"isRestoring":"optimistic",se(a),Yt(a,n),te(n);const m=!h.getQueryCache().get(a.queryHash),[d]=C.useState(()=>new t(h,a)),g=d.getOptimisticResult(a),E=!i&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(S=>{const Z=E?d.subscribe(st.batchCalls(S)):tt;return d.updateResult(),Z},[d,E]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),C.useEffect(()=>{d.setOptions(a)},[a,d]),ie(a,g))throw At(a,d,n);if(ee({result:g,errorResetBoundary:n,throwOnError:a.throwOnError,query:h.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw g.error;if((q=(b=h.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||q.call(b,a,g),a.experimental_prefetchInRender&&!ht&&re(g,i)){const S=m?At(a,d,n):(H=h.getQueryCache().get(a.queryHash))==null?void 0:H.promise;S==null||S.catch(tt).finally(()=>{d.updateResult()})}return a.notifyOnChangeProps?g:d.trackResult(g)}function ne(e,t){return ae(e,zt)}function he(e,t){const s=pt(),[i]=C.useState(()=>new $t(s,e));C.useEffect(()=>{i.setOptions(e)},[i,e]);const n=C.useSyncExternalStore(C.useCallback(a=>i.subscribe(st.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),h=C.useCallback((a,m)=>{i.mutate(a,m).catch(tt)},[i]);if(n.error&&Pt(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:h,mutateAsync:n.mutate}}const ge={ADMIN:{AUTH:{LOGIN:"/users"}},USERS:{LIST:"/users",CREATE:"/users",DETAIL:e=>`/users/${e}`,UPDATE:e=>`/users/${e}`,DELETE:e=>`/users/${e}`}},ue=e=>e.replace(/_([a-zA-Z0-9])/g,(t,s)=>/[a-zA-Z]/.test(s)?s.toUpperCase():s),et=(e,t)=>{const s={};for(const[i,n]of Object.entries(t)){const h=oe(e,i);if(h!=null)if(Array.isArray(n)&&Array.isArray(h)){const a=n[0];s[i]=h.map(m=>typeof a=="object"&&a!==null?et(m,a):Dt(m,a))}else typeof n=="object"&&n!==null&&!Array.isArray(n)?s[i]=et(h,n):s[i]=Dt(h,n)}return s},oe=(e,t)=>{const s=Object.keys(e).find(i=>ue(i)===t);if(s)return e[s]},Dt=(e,t)=>t===Date?(e instanceof Date?e:new Date(e)).toISOString():t===Number?Number(e):t===Boolean?!!e:t===String?typeof e=="string"||e===null||e===void 0?e:typeof e=="object"?JSON.stringify(e):String(e):e;function ce(){const e=pt();return{call:s=>{s&&s.forEach(i=>{e.removeQueries({queryKey:Array.isArray(i)?i:[i]})})}}}function ve(e,t){e.data&&(t!=null&&t.bodyParamsStruct)?e.data=et(e.data,t.bodyParamsStruct):e.data={};const{t:s}=_t("common");return{query:ne({queryKey:(t==null?void 0:t.querykey)??[],queryFn:async()=>{try{const n=(await Lt(e)).data;if(typeof n!="object")throw new Error("Data response is not json object");return n}catch(n){const h=Ft(n,{t:s,message:t==null?void 0:t.message});if(h)throw new Error(h);return null}}})}}function Re(e,t){const{t:s}=_t("common"),i=Kt(),n=ce();return{mutation:he({mutationFn:a=>(a&&(t!=null&&t.bodyParamsStruct)?e.data=et(a,t.bodyParamsStruct):e.data={},a!=null&&a.rewriteAxiosOption&&(e={...e,...a.rewriteAxiosOption}),Lt(e)),onError:a=>{Ft(a,{t:s,message:t==null?void 0:t.message})},onSuccess(a,m){var d;(d=t==null?void 0:t.onSuccess)==null||d.call(t,a.data,m),n.call(t==null?void 0:t.refreshQuerykey),t!=null&&t.redirect&&i(t.redirect)}})}}export{ge as A,ve as a,ce as b,Re as u};
