import{L as x,w as h}from"./chunk-QMGIS6GS-6uWjcyoF.js";import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{o as f,s as i,u as j,a as w,F as N,b as n,c as m,d as l,e as d,f as c}from"./types-CAacSOP9.js";import{B as v}from"./button-CDt8EqQF.js";import{I as b}from"./input-CR9UrM4y.js";import{u as A,P as F,A as u}from"./label-CIXO5sdT.js";import{t as I}from"./index-DHwkbqTO.js";import{U as L}from"./url-path-Beq2zZoZ.js";import{s as T}from"./auth-7F1Hx8zE.js";import{u as g}from"./useTranslation-LzogQ1jP.js";import{C,a as P,b as S,c as D,d as M}from"./card-CDFOJEQt.js";import{m as y}from"./utils-BZSh1A4I.js";import"./eye-CeJUASEq.js";import"./index-Cy3Emdqg.js";const H=a=>f({email:i().min(1,{message:a("required",{ns:"validate"})}).max(255,{message:a("max",{max:255,ns:"validate"})}).email({message:a("email",{ns:"validate"})}),password:i().min(6,{message:a("min",{min:6,ns:"validate"})}).max(50,{message:a("max",{max:50,ns:"validate"})})});function O(){const{t:a}=g(["auth","validate"]),e=j({resolver:w(H(a)),defaultValues:{email:"",password:""}}),t=A({method:"get",url:u.ADMIN.AUTH.LOGIN},{message:{default:a("errors.login_default",{ns:"auth"})},bodyParamsStruct:{email:String,password:String},redirect:L.ADMIN.HOME,onSuccess:(o,r)=>{if(o.length===0)throw new Error(a("errors.login_default",{ns:"auth"}));T(new Date().getTime()+""+((r==null?void 0:r.email)||"")),I.success(a("login.success",{ns:"auth"}))}}),p=o=>{t.mutation.mutate({...o,rewriteAxiosOption:{url:u.ADMIN.AUTH.LOGIN+"?email="+o.email}})};return s.jsx(N,{...e,children:s.jsxs("form",{onSubmit:o=>{o.preventDefault(),e.handleSubmit(p)(o)},className:"grid gap-5",children:[s.jsx(n,{control:e.control,name:"email",render:({field:o})=>s.jsxs(m,{children:[s.jsx(l,{children:a("login.email")}),s.jsx(d,{children:s.jsx(b,{type:"email",placeholder:"admin@gmail.com",...o})}),s.jsx(c,{})]})}),s.jsx(n,{control:e.control,name:"password",render:({field:o})=>s.jsxs(m,{className:"relative",children:[s.jsx(l,{children:a("login.password")}),s.jsx(d,{children:s.jsx(F,{...o})}),s.jsx(c,{}),s.jsx(x,{to:"/forgot-password",className:"text-muted-foreground absolute -top-0.5 right-0 text-sm font-medium hover:opacity-75",children:a("login.forgotPassword")})]})}),s.jsx(v,{className:"mt-2",loading:t.mutation.isPending,children:a("login.button")})]})})}const Z=()=>y("Login"),$=h(function(){const{t:e}=g(["auth"]);return s.jsx(s.Fragment,{children:s.jsxs(C,{className:"gap-4",children:[s.jsxs(P,{children:[s.jsx(S,{className:"text-lg tracking-tight",children:e("login.title")}),s.jsx(D,{children:e("login.subtitle")})]}),s.jsx(M,{children:s.jsx(O,{})})]})})});export{$ as default,Z as meta};
