import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{u as h,a as I,F as g,b as l,c as d,d as c,e as u,f as p}from"./form-Dmv1pmwz.js";import{I as f}from"./input-D-_1mv6L.js";import{r as U,d as L,L as A}from"./chunk-QMGIS6GS-DZztEkVs.js";import{P as T}from"./debounce-D9ctexka.js";import{t as D}from"./index-CGgTmrc1.js";import{a as i}from"./local-storage-DWUcO9io.js";import{U as n}from"./url-path-DazeSMIU.js";import{u as R,E as b}from"./user-schema-8hmsRQQn.js";import{D as y}from"./DeleteModal-d_69eadW.js";import{u as F,A as x,a as N}from"./use-api-CkHLgVxI.js";import{u as j}from"./useTranslation-BTxYNbzO.js";import{B as _,A as v}from"./button-DZ4teuIw.js";import{L as P}from"./ClientComponent-DCGFJxP_.js";import"./utils-BA6gyYTm.js";import"./label-2IwhEJvq.js";import"./i18nInstance-CZ4THbp4.js";import"./index-Eq7z2fNl.js";import"./auth-_r7jvU0l.js";import"./eye-P0uHH9uI.js";import"./loader-circle-CzWM3YVe.js";import"./dialog-BMIEr9-h.js";import"./index-BQ_PequZ.js";import"./Combination-BuQb3gNO.js";import"./index-B39MSPx1.js";import"./QueryClientProvider-CHEzqbNR.js";import"./preload-helper-B6OyRjpI.js";function k({queryResponse:r,children:t}){return s.jsx(s.Fragment,{children:r.query.isLoading?s.jsx(P,{}):r.query.isError?s.jsx("div",{className:"flex flex-col items-center gap-2 text-xl font-bold text-red-500",children:s.jsx("p",{children:r.query.error.message})}):r.query.data&&t(r.query.data)})}function M({user:r}){const{t}=j(["common","users","validate"]),[m,o]=U.useState(!1),a=h({resolver:I(R(t,!1)),defaultValues:{name:r.name,email:r.email,password:""}}),S=F({method:"put",url:x.USERS.UPDATE(r.id)},{message:{default:t("errors.update_default",{ns:"users"})},bodyParamsStruct:{email:String,name:String,password:String},refreshQuerykey:[i.USER_LIST,[i.USER_DETAIL,r.id]],redirect:n.ADMIN.USERS.LIST,onSuccess:e=>{D.success(t("success.update",{ns:"users",id:e.name}))}}),E=e=>{S.mutation.mutate(e)};return s.jsxs("div",{children:[s.jsx(g,{...a,children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),a.handleSubmit(E)(e)},className:"grid gap-5",children:[s.jsx(l,{control:a.control,name:"email",render:({field:e})=>s.jsxs(d,{children:[s.jsx(c,{children:t("list.email",{ns:"users"})}),s.jsx(u,{children:s.jsx(f,{type:"email",placeholder:"admin@gmail.com",...e})}),s.jsx(p,{})]})}),s.jsx(l,{control:a.control,name:"name",render:({field:e})=>s.jsxs(d,{children:[s.jsx(c,{children:t("list.name",{ns:"users"})}),s.jsx(u,{children:s.jsx(f,{placeholder:"Soda name",...e})}),s.jsx(p,{})]})}),s.jsx(l,{control:a.control,name:"password",render:({field:e})=>s.jsxs(d,{children:[s.jsx(c,{children:t("list.password",{ns:"users"})}),s.jsx(u,{children:s.jsx(T,{...e})}),s.jsx(p,{})]})}),s.jsx(b,{loading:S.mutation.isPending,backTo:n.ADMIN.USERS.LIST,setOpenDelete:o})]})}),s.jsx(y,{apiUrl:x.USERS.DELETE(r.id),open:m,setOpen:o,refreshQuerykey:[i.USER_LIST,[i.USER_DETAIL,r.id]],redirect:n.ADMIN.USERS.LIST})]})}function ds(){const{t:r}=j("users"),{id:t}=L(),m=N({method:"get",url:x.USERS.DETAIL(t??"")},{querykey:[i.USER_DETAIL,t],message:{default:r("errors.detail_default",{ns:"users"})}});return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(A,{to:n.ADMIN.USERS.LIST,children:s.jsx(_,{variant:"link",icon:v.BACK})}),s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r("edit.title")})]}),s.jsx(k,{queryResponse:m,children:o=>s.jsx(M,{user:o})})]})}export{ds as default};
