import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{o as x,s as i,u as h,a as f,F as j,b as m,c as n,d as l,e as d,f as c}from"./form-r2l1zOyv.js";import{L as N}from"./chunk-QMGIS6GS-DZztEkVs.js";import{B as v}from"./button-D8KfK1wl.js";import{I as w}from"./label--sXyX5cI.js";import{P as b}from"./debounce-D36KzrGu.js";import{t as F}from"./index-CGgTmrc1.js";import{U as I}from"./url-path-Bgy9PlGf.js";import{u as A,A as u}from"./use-api-DNBoLK-z.js";import{s as T}from"./auth-Dd4vsUy7.js";import{u as p}from"./useTranslation-BUqbQTvj.js";import{C,a as L,b as P,c as S,d as D}from"./card-CexV2cJO.js";import"./utils-D1ivxlLM.js";import"./loader-circle-D3J2tH4z.js";import"./createLucideIcon-7r_rWK54.js";import"./i18nInstance-BNC2ewcD.js";import"./index-Eq7z2fNl.js";import"./QueryClientProvider-CHEzqbNR.js";import"./local-storage-DWUcO9io.js";const M=r=>x({email:i().min(1,{message:r("required",{ns:"validate"})}).max(255,{message:r("max",{max:255,ns:"validate"})}).email({message:r("email",{ns:"validate"})}),password:i().min(6,{message:r("min",{min:6,ns:"validate"})}).max(50,{message:r("max",{max:50,ns:"validate"})})});function y(){const{t:r}=p(["auth","validate"]),o=h({resolver:f(M(r)),defaultValues:{email:"",password:""}}),t=A({method:"get",url:u.ADMIN.AUTH.LOGIN},{message:{default:r("errors.login_default",{ns:"auth"})},bodyParamsStruct:{email:String,password:String},redirect:I.ADMIN.HOME,onSuccess:(a,e)=>{if(a.length===0)throw new Error(r("errors.login_default",{ns:"auth"}));T(new Date().getTime()+""+((e==null?void 0:e.email)||"")),F.success(r("login.success",{ns:"auth"}))}}),g=a=>{t.mutation.mutate({...a,rewriteAxiosOption:{url:u.ADMIN.AUTH.LOGIN+"?email="+a.email}})};return s.jsx(j,{...o,children:s.jsxs("form",{onSubmit:a=>{a.preventDefault(),o.handleSubmit(g)(a)},className:"grid gap-5",children:[s.jsx(m,{control:o.control,name:"email",render:({field:a})=>s.jsxs(n,{children:[s.jsx(l,{children:r("login.email")}),s.jsx(d,{children:s.jsx(w,{type:"email",placeholder:"admin@gmail.com",...a})}),s.jsx(c,{})]})}),s.jsx(m,{control:o.control,name:"password",render:({field:a})=>s.jsxs(n,{className:"relative",children:[s.jsx(l,{children:r("login.password")}),s.jsx(d,{children:s.jsx(b,{...a})}),s.jsx(c,{}),s.jsx(N,{to:"/forgot-password",className:"text-muted-foreground absolute -top-0.5 right-0 text-sm font-medium hover:opacity-75",children:r("login.forgotPassword")})]})}),s.jsx(v,{className:"mt-2",loading:t.mutation.isPending,children:r("login.button")})]})})}function q(){const{t:r}=p(["auth"]);return s.jsx(s.Fragment,{children:s.jsxs(C,{className:"gap-4",children:[s.jsxs(L,{children:[s.jsx(P,{className:"text-lg tracking-tight",children:r("login.title")}),s.jsx(S,{children:r("login.subtitle")})]}),s.jsx(D,{children:s.jsx(y,{})})]})})}export{q as default};
